<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine Quest â€” Sumo Edition</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      background: radial-gradient(circle at top, #ffe6f2, #fff);
      color:#111;
    }
    .card{
      width:min(640px, 94vw);
      background: rgba(255,255,255,.92);
      border:1px solid rgba(0,0,0,.08);
      border-radius:22px;
      padding:22px;
      box-shadow: 0 18px 55px rgba(0,0,0,.09);
      position:relative;
      overflow:hidden;
    }
    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background:#fff0f7;
      border:1px solid rgba(255,59,141,.25);
      color:#b30055;
      font-weight:800;
      font-size:12px;
      margin-bottom:12px;
    }
    h1{ margin:0 0 8px; font-size:28px; }
    p{ margin:0 0 14px; line-height:1.45; }
    .row{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .stage{ min-height:270px; display:grid; gap:12px; }

    .btn{
      border:0;
      padding:12px 16px;
      border-radius:14px;
      font-weight:850;
      cursor:pointer;
      user-select:none;
      transition: transform .08s ease;
    }
    .btn:active{ transform: scale(.98); }

    #yesBtn{ background:#ff3b8d; color:#fff; font-size:18px; }
    #noBtn{ background:#111; color:#fff; position:absolute; }
    #noBtnWrap{ position:relative; height:95px; }

    .bubble{
      background:#fff;
      border:1px solid rgba(0,0,0,.08);
      border-radius:16px;
      padding:12px 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
    }

    .choices .btn{ background:#eee; font-weight:800; }
    .choices .btn.primary{ background:#ff3b8d; color:#fff; }

    .mini{ font-size:12px; opacity:.72; }

    .confetti{
      position:absolute; inset:-10px;
      pointer-events:none;
      opacity:0;
      transition:opacity .2s ease;
    }
    .confetti.on{ opacity:1; }
  </style>
</head>
<body>
  <div class="card" id="card">
    <div class="badge">Valentine Quest â€” for Sumo ğŸ¥‹</div>

    <!-- STAGE 1 -->
    <div id="stage1" class="stage">
      <div>
        <h1>Sumoâ€¦ will you be my Valentine? ğŸ’˜</h1>
        <p id="hintLine">Hint: your identity can be verified by one phrase: <b>â€œOzil fanâ€</b>.</p>
      </div>

      <div class="row">
        <button id="yesBtn" class="btn">Yes ğŸ’–</button>
        <span class="mini" id="yesScaleLabel"></span>
      </div>

      <div id="noBtnWrap" class="bubble">
        <div class="mini">The â€œNoâ€ button is inside this box ğŸ‘‡ (itâ€™s shy)</div>
        <button id="noBtn" class="btn">No ğŸ™ƒ</button>
      </div>

      <div class="bubble" id="logBox" aria-live="polite">
        <b>Status:</b> <span id="status">Waiting for Sumoâ€™s decisionâ€¦</span>
      </div>
      <div class="mini">PS: Clicking â€œNoâ€ may increase the size of the â€œYesâ€ button. Totally normal.</div>
    </div>

    <!-- STAGE 2 -->
    <div id="stage2" class="stage" style="display:none;">
      <div class="bubble">
        <h1 style="margin-bottom:6px;">I KNEW IT, SUMO ğŸ˜Œ</h1>
        <p id="stage2line">You clicked <b>Yes</b>. The Ozil fan in you chooses beauty over chaos.</p>
      </div>

      <div class="bubble choices">
        <p style="margin-bottom:10px;"><b>Next level:</b> choose our Valentine plan.</p>
        <div class="row">
          <button class="btn primary" data-choice="Dinner + desserts ğŸ°">Dinner + desserts ğŸ°</button>
          <button class="btn" data-choice="Walk + hot chocolate â˜•">Walk + hot chocolate â˜•</button>
          <button class="btn" data-choice="Movie + popcorn ğŸ¿">Movie + popcorn ğŸ¿</button>
          <button class="btn" data-choice="Surprise me (risky) ğŸ²">Surprise me (risky) ğŸ²</button>
        </div>
        <p class="mini" style="margin-top:10px;">All answers are correct (especially the ones that involve you).</p>
      </div>

      <div class="row">
        <button id="backBtn" class="btn" style="background:#eee;">Back</button>
      </div>
    </div>

    <!-- STAGE 3 -->
    <div id="stage3" class="stage" style="display:none;">
      <div class="bubble">
        <h1 style="margin-bottom:6px;">Mission complete âœ…</h1>
        <p id="finalLine"></p>
        <p class="mini">Send me a screenshot as proof. (Yes, this is a legal contract.)</p>
      </div>
      <div class="row">
        <button id="restartBtn" class="btn" style="background:#111;color:#fff;">Play again</button>
      </div>
    </div>

    <svg class="confetti" id="confetti" viewBox="0 0 800 260" preserveAspectRatio="none">
      <circle cx="70" cy="40" r="6"/>
      <circle cx="120" cy="110" r="5"/>
      <circle cx="200" cy="70" r="7"/>
      <circle cx="300" cy="140" r="6"/>
      <circle cx="420" cy="60" r="8"/>
      <circle cx="520" cy="130" r="6"/>
      <circle cx="620" cy="80" r="7"/>
      <circle cx="720" cy="150" r="6"/>
    </svg>
  </div>

  <script>
    const NICK = "Sumo";
    const INSIDE_JOKE = "Ozil fan";

    const stage1 = document.getElementById("stage1");
    const stage2 = document.getElementById("stage2");
    const stage3 = document.getElementById("stage3");

    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const noWrap = document.getElementById("noBtnWrap");
    const status = document.getElementById("status");
    const hintLine = document.getElementById("hintLine");
    const yesScaleLabel = document.getElementById("yesScaleLabel");

    const confetti = document.getElementById("confetti");
    const finalLine = document.getElementById("finalLine");
    const backBtn = document.getElementById("backBtn");
    const restartBtn = document.getElementById("restartBtn");

    const noLines = [
      `No? Thatâ€™s not very ${INSIDE_JOKE} of you.`,
      "The No button just pulled a hamstring trying to leave.",
      "Are you sure? Likeâ€¦ VAR checked it and still said YES.",
      "No detected. Converting to Yesâ€¦ please wait.",
      `Sumo, donâ€™t make me call ${INSIDE_JOKE} for backup.`,
      "This is getting dramatic. The Yes button is thriving.",
      "Your â€œNoâ€ has been respectfully ignored.",
      "Okay okayâ€¦ but the Yes button is becoming unstoppable."
    ];

    let noCount = 0;
    let yesScale = 1;

    function clamp(n, a, b){ return Math.max(a, Math.min(b, n)); }

    function moveNoButton() {
      const pad = 10;
      const wrapRect = noWrap.getBoundingClientRect();
      const btnW = noBtn.offsetWidth || 90;
      const btnH = noBtn.offsetHeight || 44;

      const maxX = Math.max(pad, wrapRect.width - btnW - pad);
      const maxY = Math.max(pad + 18, wrapRect.height - btnH - pad);

      const x = Math.random() * maxX;
      const y = (Math.random() * (maxY - (pad + 18))) + (pad + 18);

      noBtn.style.left = `${x}px`;
      noBtn.style.top  = `${y}px`;
    }

    function updateYesSize() {
      yesBtn.style.transform = `scale(${yesScale})`;
      const pct = Math.round((yesScale - 1) * 100);
      yesScaleLabel.textContent = pct > 0 ? `Yes confidence +${pct}%` : "";
    }

    moveNoButton();
    updateYesSize();

    noBtn.addEventListener("click", () => {
      noCount++;

      yesScale = clamp(yesScale + 0.13, 1, 3.0);
      updateYesSize();

      moveNoButton();

      const line = noLines[(noCount - 1) % noLines.length];
      status.textContent = `No registered (${noCount}). ${line}`;

      hintLine.textContent = noCount >= 4
        ? `${NICK}, the Yes button is now the main character. (${INSIDE_JOKE} approved.)`
        : `Hint: your identity can be verified by one phrase: â€œ${INSIDE_JOKE}â€.`;

      if (noCount >= 6) noBtn.textContent = "No (panicking) ğŸ˜³";
      if (noCount >= 10) noBtn.textContent = "Ok fineâ€¦ ğŸ˜¶";
    });

    noBtn.addEventListener("mouseenter", () => {
      if (noCount >= 2) moveNoButton();
    });

    yesBtn.addEventListener("click", () => {
      confetti.classList.add("on");
      status.textContent = "YES detected. Upgrading relationship statusâ€¦";

      stage1.style.display = "none";
      stage2.style.display = "grid";
      stage3.style.display = "none";

      const extra =
        noCount === 0 ? `No hesitation, ${NICK}. Dangerous confidence.`
        : noCount < 4 ? `${NICK} tried â€œNoâ€ ${noCount} time(s). Cute attempt.`
        : `${NICK} fought the algorithm ${noCount} timesâ€¦ and still lost ğŸ˜Œ`;

      document.getElementById("stage2line").innerHTML =
        `You clicked <b>Yes</b>. ${extra} <br>Also: certified <b>${INSIDE_JOKE}</b> behavior.`;
    });

    document.querySelectorAll("[data-choice]").forEach(btn => {
      btn.addEventListener("click", () => {
        const choice = btn.getAttribute("data-choice");
        stage1.style.display = "none";
        stage2.style.display = "none";
        stage3.style.display = "grid";

        finalLine.innerHTML =
          `<b>${NICK}</b> selected: <b>${choice}</b>.<br><br>` +
          `Congratulations. You are officially my Valentine. ğŸ’˜<br>` +
          `Reward unlocked: unlimited compliments (limited only by my shyness).`;
      });
    });

    backBtn.addEventListener("click", () => {
      confetti.classList.remove("on");
      stage1.style.display = "grid";
      stage2.style.display = "none";
      stage3.style.display = "none";
    });

    restartBtn.addEventListener("click", () => {
      confetti.classList.remove("on");
      noCount = 0;
      yesScale = 1;
      noBtn.textContent = "No ğŸ™ƒ";
      status.textContent = "Waiting for Sumoâ€™s decisionâ€¦";
      hintLine.textContent = `Hint: your identity can be verified by one phrase: â€œ${INSIDE_JOKE}â€.`;
      updateYesSize();
      moveNoButton();
      stage1.style.display = "grid";
      stage2.style.display = "none";
      stage3.style.display = "none";
    });

    window.addEventListener("resize", () => moveNoButton());
  </script>
</body>
</html>
